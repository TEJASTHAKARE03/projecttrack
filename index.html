<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RS â€¢ Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    html,body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .nova{min-height:100vh;color:#fff;background:
      radial-gradient(1200px 600px at 20% -20%, rgba(229,9,20,.16), transparent),
      radial-gradient(1100px 540px at 120% 10%, rgba(229,9,20,.10), transparent),
      #0c0c0f;}
    .cards-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:22px;align-items:stretch}
    .card{position:relative;border-radius:18px;background:linear-gradient(180deg,#111214,#0c0c10);border:1px solid rgba(255,255,255,.06);
      box-shadow:0 20px 50px rgba(0,0,0,.45);display:flex}
    .card:hover{transform:translateY(-3px);border-color:rgba(229,9,20,.35);box-shadow:0 28px 70px rgba(229,9,20,.18),0 18px 40px rgba(0,0,0,.55);transition:.25s}
    .card-body{padding:22px;display:flex;flex-direction:column;width:100%}
    .pill{display:inline-flex;align-items:center;border-radius:999px;padding:.35rem .7rem;font-weight:700;font-size:.78rem}
    .pill.red{background:linear-gradient(180deg,#ef4444,#a60711);border:1px solid rgba(229,9,20,.55)}
    .pill.muted{background:#191a1f;border:1px solid #2b2c33;color:#e5e7eb}
    .stretched{position:absolute;inset:0;border-radius:inherit;outline:none}
    .stretched:focus-visible{box-shadow:0 0 0 3px rgba(229,9,20,.45) inset}
  </style>
</head>
<body class="nova">
  <header class="max-w-6xl mx-auto px-4 py-6 flex items-center gap-3">
    <div class="h-10 w-10 rounded-xl bg-red-600 grid place-content-center text-white font-extrabold">RS</div>
    <div>
      <div class="text-xl font-extrabold">RS Dashboard</div>
      <div class="text-xs text-slate-400">PPF Sales & Service Suite</div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-10">
    <section class="cards-grid">
      <article class="card"><a class="stretched" href="callfollowup.html" aria-label="Open Call Follow-Up"></a>
        <div class="card-body">
          <div class="flex items-center justify-between"><h3 class="font-extrabold">Call Follow-Up</h3><span id="kpi-today" class="pill red">0 Today</span></div>
          <p class="text-slate-300/90 mt-1">Log calls, assign follow-ups & view live KPIs.</p>
          <div class="mt-auto pt-5 flex justify-between"><span id="kpi-open" class="pill muted">0 Open</span><span id="kpi-completion" class="pill muted">0% Done</span></div>
        </div>
      </article>

      <article class="card"><a class="stretched" href="customerreq.html" aria-label="Open Customer Requirement"></a>
        <div class="card-body">
          <div class="flex items-center justify-between"><h3 class="font-extrabold">Customer Requirement</h3><span id="kpi-requests" class="pill red">0 Leads</span></div>
          <p class="text-slate-300/90 mt-1">Capture new requirements & review recent leads.</p>
          <div class="mt-auto pt-5 flex justify-between"><span id="kpi-frequent" class="pill muted">0 Frequent</span><span class="pill muted">Live</span></div>
        </div>
      </article>

      <article class="card"><a class="stretched" href="serviceissuetracker.html" aria-label="Open Service Issue Tracker"></a>
        <div class="card-body">
          <div class="flex items-center justify-between"><h3 class="font-extrabold">Service Issue Tracker</h3><span id="kpi-issues" class="pill red">0 Issues</span></div>
          <p class="text-slate-300/90 mt-1">Record & prioritize service issues with due dates.</p>
          <div class="mt-auto pt-5 flex justify-between"><span class="pill muted">Resolve Fast</span><span class="pill muted">Team View</span></div>
        </div>
      </article>
    </section>
  </main>

  <script src="script.js"></script>
  <script>
    (async function(){
      try{
        const s = await getJSON('/api/stats');
        setText('kpi-today', `${s.todaysCalls ?? 0} Today`);
        setText('kpi-open', `${s.openFollowups ?? 0} Open`);
        setText('kpi-completion', `${s.completionRate ?? 0}% Done`);
        setText('kpi-frequent', `${(s.frequentCallers||[]).length ?? 0} Frequent`);
        getJSON('/api/requests').then(d=>setText('kpi-requests', `${d.length||0} Leads`)).catch(()=>{});
        getJSON('/api/issues').then(d=>setText('kpi-issues', `${d.length||0} Issues`)).catch(()=>{});
      }catch(e){}
    })();
  </script>
</body>
</html>
